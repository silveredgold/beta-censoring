import{r as n,o as c,c as h,a as e,b as o,w as i,F as l,e as t,d as s}from"./app.a918adb8.js";import{_ as d}from"./plugin-vue_export-helper.21dcd24c.js";const u={},m=e("blockquote",null,[e("p",null,"Note that in the preview releases, configuring the server is an advanced process that assumes some familiarity with editing configuration files yourself. This process will hopefully improve in future releases so it is only recommended to proceed if you are comfortable with that, and really need to.")],-1),f=e("h2",{id:"server-performance",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#server-performance","aria-hidden":"true"},"#"),t(" Server Performance")],-1),p=e("p",null,"Performance for something as complex as Beta Censoring is not an easy topic to discuss, but this will hopefully serve as a reasonably approachable description of where the real performance impacts in Beta Censoring are, and what you can do to improve performance for either real-time or batch/sequential censoring.",-1),g=e("h3",{id:"checking-server-performance",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#checking-server-performance","aria-hidden":"true"},"#"),t(" Checking Server Performance")],-1),_=t("The Beta Censoring server includes a basic web dashbaord to give a rough idea of the performance of the server. To check it, just open your browser and navigate to "),y={href:"http://beta-censoring.local:2382/",target:"_blank",rel:"noopener noreferrer"},b=e("code",null,"http://beta-censoring.local:2382/",-1),w=t(" and you should see a simple status panel to check the details of your server. Click the Performance tab to view a quick summary of performance metrics."),v=t("If that URL doesn't work, try directly navigating to the server URL. For example, that would be "),k={href:"http://localhost:2382",target:"_blank",rel:"noopener noreferrer"},x=e("code",null,"http://localhost:2382",-1),C=t(" on the PC you're running the server on."),I=s('<p>This page will give you a <strong>very</strong> rough breakdown of the performance metrics for recent requests for the current server session. Of particular note it will give you some indicators for <em>censoring time</em> and <em>inference time</em>.</p><p><em>Inference time</em> refers to the time it takes for the server to load a requested image, convert it for the AI to handle and actually run it through the AI. This just includes the steps required to load the image and for the AI to classify the matches in the image.</p><p><em>Censoring time</em> refers to the time required to actually censor the results returned by the AI. This includes transforming the results (where necessary) and applying the invididual censoring effects as requested. Given the number of steps involved in this part, this time is currently returned as a single time for the whole censoring step.</p><h2 id="performance-impact-guide" tabindex="-1"><a class="header-anchor" href="#performance-impact-guide" aria-hidden="true">#</a> Performance Impact Guide</h2><h3 id="workers" tabindex="-1"><a class="header-anchor" href="#workers" aria-hidden="true">#</a> Workers</h3>',5),q=t("As covered in the "),B=t("Configuration"),T=t(" guide, you can control how many workers the server uses to censor images using the configuration files. Make sure you read that document in full as there are real risks and tradeoffs involved in increasing the default worker count."),A=s('<h3 id="censor-types" tabindex="-1"><a class="header-anchor" href="#censor-types" aria-hidden="true">#</a> Censor Types</h3><p>Beta Censoring makes any of the censor types in CensorCore available for clients to request, which includes (at least) <code>Blur</code>, <code>BlackBar</code>, <code>Caption</code>, <code>Pixelation</code> and <code>Sticker</code>. That being said, some of these are more intensive than others to actually apply to an image. In particular, black bar will generally be the fastest while stickers will generally be the slowest with most of the others between those two. In particular, if you&#39;re noticing the <em>censoring time</em> increasing but not the <em>inference time</em> then you may want to consider using less intensive censoring types.</p><p>Additionally, obfuscation is applied last and to the whole image so it can have a noticeable performance impact, especially on high-resolution images. If you&#39;re using obfuscation, try turning it off and see if that improves response times.</p><h3 id="image-size" tabindex="-1"><a class="header-anchor" href="#image-size" aria-hidden="true">#</a> Image Size</h3><p>As you&#39;d expect, the larger an image the harder it is to both detect matches and censor those matches. Beta Censoring will always scale large images down for the AI (to improve performance) but will then apply censoring to the full-size image and return the censored images at full resolution. This improves quality but does slow the server down when censoring very large images.</p><p>If you&#39;re seeing significant performance degradation with large images, raise an issue on GitHub and we will look into methods to improve this.</p><h3 id="experimental-features" tabindex="-1"><a class="header-anchor" href="#experimental-features" aria-hidden="true">#</a> Experimental Features</h3><p>Some of the features exposed by Beta Censoring are <em>experimental</em> features that we have included for those who want to use them but may impact performance.</p><h4 id="optimization-mode" tabindex="-1"><a class="header-anchor" href="#optimization-mode" aria-hidden="true">#</a> Optimization mode</h4>',9),F=t("As covered in the "),z=t("Configuration guide"),N=t(", Beta Censoring supports different optimization modes. As of the time of writing, this largely controls whether requested images are pre-processed by a body detection model to isolate only the parts of the image that contain people to be censored. This (ab)uses the "),P={href:"https://github.com/PeterL1n/RobustVideoMatting",target:"_blank",rel:"noopener noreferrer"},L=t("Robust Video Matting"),S=t(" project's model to try and reduce the amount of work the vastly slower NudeNet model has to do."),E=e("h4",{id:"facial-feature-detection",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#facial-feature-detection","aria-hidden":"true"},"#"),t(" Facial Feature Detection")],-1),R=e("p",null,[t("Facial feature detection uses its own model and middleware to identify specific facial features when faces are detected. Note that facial feature detection will only be run when clients specifically request "),e("code",null,"EYES_F"),t(" or "),e("code",null,"MOUTH_F"),t(" censoring in the request. Including these will enable feature detection which can noticeably increase censoring time.")],-1);function V(M,j){const r=n("ExternalLinkIcon"),a=n("RouterLink");return c(),h(l,null,[m,f,p,g,e("p",null,[_,e("a",y,[b,o(r)]),w]),e("blockquote",null,[e("p",null,[v,e("a",k,[x,o(r)]),C])]),I,e("p",null,[q,o(a,{to:"/content/configuration.html"},{default:i(()=>[B]),_:1}),T]),A,e("p",null,[F,o(a,{to:"/content/configuration.html"},{default:i(()=>[z]),_:1}),N,e("a",P,[L,o(r)]),S]),E,R],64)}var U=d(u,[["render",V]]);export{U as default};
