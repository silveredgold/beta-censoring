<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Developing with Beta Censoring | Beta Censoring</title><meta name="description" content="On-demand censoring of NSFW images just for betas">
    <link rel="modulepreload" href="/beta-censoring/assets/app.2a3709a1.js"><link rel="modulepreload" href="/beta-censoring/assets/developers.html.f10e7a50.js"><link rel="modulepreload" href="/beta-censoring/assets/developers.html.82e75d58.js"><link rel="modulepreload" href="/beta-censoring/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/beta-censoring/assets/style.8a7954ba.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/beta-censoring/" class=""><img class="logo" src="/beta-censoring/siteIcon.png" alt="Beta Censoring"><span class="site-name can-hide">Beta Censoring</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/beta-censoring/" class="" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="User Guide"><span class="title">User Guide</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="User Guide"><span class="title">User Guide</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/beta-censoring/content/installation.html" class="" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/usage.html" class="" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/configuration.html" class="" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/performance.html" class="" aria-label="Performance"><!--[--><!--]--> Performance <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/beta-safety.html" class="" aria-label="Beta Censoring and Beta Safety"><!--[--><!--]--> Beta Censoring and Beta Safety <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/beta-censoring/content/developers" class="router-link-active" aria-label="Developers"><!--[--><!--]--> Developers <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/silveredgold/beta-censoring" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/beta-censoring/" class="" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="User Guide"><span class="title">User Guide</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="User Guide"><span class="title">User Guide</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/beta-censoring/content/installation.html" class="" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/usage.html" class="" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/configuration.html" class="" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/performance.html" class="" aria-label="Performance"><!--[--><!--]--> Performance <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/beta-censoring/content/beta-safety.html" class="" aria-label="Beta Censoring and Beta Safety"><!--[--><!--]--> Beta Censoring and Beta Safety <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/beta-censoring/content/developers" class="router-link-active" aria-label="Developers"><!--[--><!--]--> Developers <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/silveredgold/beta-censoring" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Developing with Beta Censoring <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/beta-censoring/content/developers.html#design" class="router-link-active router-link-exact-active sidebar-item" aria-label="Design"><!--[--><!--]--> Design <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/beta-censoring/content/developers.html#projects" class="router-link-active router-link-exact-active sidebar-item" aria-label="Projects"><!--[--><!--]--> Projects <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/beta-censoring/content/developers.html#censorcore" class="router-link-active router-link-exact-active sidebar-item" aria-label="CensorCore"><!--[--><!--]--> CensorCore <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/beta-censoring/content/developers.html#apis" class="router-link-active router-link-exact-active sidebar-item" aria-label="APIs"><!--[--><!--]--> APIs <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/beta-censoring/content/developers.html#signalr" class="router-link-active router-link-exact-active sidebar-item" aria-label="SignalR"><!--[--><!--]--> SignalR <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/beta-censoring/content/developers.html#rest" class="router-link-active router-link-exact-active sidebar-item" aria-label="REST"><!--[--><!--]--> REST <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/beta-censoring/content/developers.html#socket" class="router-link-active router-link-exact-active sidebar-item" aria-label="Socket"><!--[--><!--]--> Socket <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="developing-with-beta-censoring" tabindex="-1"><a class="header-anchor" href="#developing-with-beta-censoring" aria-hidden="true">#</a> Developing with Beta Censoring</h1><blockquote><p>Note that this section of the documentation is specifically for advanced users and/or developers looking to integrate with Beta Censoring! If you&#39;re looking for how to get started with Beta Censoring, check the <a href="/beta-censoring/content/installation.html" class="">installation</a> and <a href="/beta-censoring/content/usage.html" class="">usage</a> docs.</p></blockquote><h2 id="design" tabindex="-1"><a class="header-anchor" href="#design" aria-hidden="true">#</a> Design</h2><p>Beta Censoring is designed as a server process providing a handful of different API/interface options for censoring images on-demand. The actual processing is done through separate workers to keep things performant and make the performance more customizable.</p><p>By default, Beta Censoring will run with 2 workers (i.e. up to 2 censoring jobs running at once), and will enable both the REST and SignalR APIs for all clients;</p><blockquote><p>There is a plugin API in the works, if you&#39;re interested in tweaking/replacing the inner workings of Beta Censoring.</p></blockquote><h3 id="projects" tabindex="-1"><a class="header-anchor" href="#projects" aria-hidden="true">#</a> Projects</h3><p>Just like CensorCore, BetaCensor is designed to be as flexible and configurable as possible, so the project is split up into distinct components to make reuse and integration easier. BetaCensor.Server is the main server entry point for Beta Censoring. In turn, it uses BetaCensor.Web and BetaCensor.Web.Status for most of the HTTP moving parts and BetaCensor.Workers for the worker queues (that do the actual censoring).</p><p>This might seem a little complex at first glance (it is) but does make keeping things decoupled a little easier. It also means that you could actually embed the vast majority of Beta Censoring into your own server if you wanted to.</p><h3 id="censorcore" tabindex="-1"><a class="header-anchor" href="#censorcore" aria-hidden="true">#</a> CensorCore</h3><p><a href="https://github.com/silveredgold/censor-core" target="_blank" rel="noopener noreferrer">CensorCore<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> is the underlying framework responsible for handling the nitty-gritty of both the AI inference, and the actual image censoring. CensoreCore is used to abstract the intricacies of the ONNX Runtime responsible for running the model (as well as the model itself) away from the Beta Censoring server. Beta Censoring is just responsible for providing much friendlier interfaces and a running server for non-native-C# clients.</p><blockquote><p>Note that the REST interface exposed in Beta Protection is actually just the REST server from CensorCore.Web, exposed directly at <code>/censoring/</code></p></blockquote><h2 id="apis" tabindex="-1"><a class="header-anchor" href="#apis" aria-hidden="true">#</a> APIs</h2><h3 id="signalr" tabindex="-1"><a class="header-anchor" href="#signalr" aria-hidden="true">#</a> SignalR</h3><p>SignalR is the &quot;preferred&quot; API for clients that support it as it is easier to use and more stable than the other options. While the server will accept any SignalR-supported transport, it&#39;s recommended to limit clients to WebSockets for performance.</p><p>The SignalR API is available at <code>/live</code> and exposes a handful of endpoints for the common requests (censoring images and cancelling requests). If you&#39;re using TS/JS, there is a <code>@silveredgold/beta-censor-client</code> package available which includes a reasonably easy-to-use client to access a running Beta Censoring server via SignalR</p><blockquote><p>The <code>@silveredgold/beta-censor-client</code> package does have a couple of notable dependencies and is designed to work with them so make sure it suits your use case.</p></blockquote><h3 id="rest" tabindex="-1"><a class="header-anchor" href="#rest" aria-hidden="true">#</a> REST</h3><p>The REST API is provided directly by the underlying <a href="https://github.com/silveredgold/censor-core" target="_blank" rel="noopener noreferrer">CensorCore<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> framework, and is available at <code>/censoring</code>. The endpoints of interest are the <code>GET /getCensored</code> endpoint for zero-configuration quick censoring, and the <code>POST /censorImage</code> endpoint that supports custom censoring options.</p><p>Note that both options will block and only respond once censoring is complete! If you&#39;re after an asynchronous alternative, SignalR is your best bet.</p><h3 id="socket" tabindex="-1"><a class="header-anchor" href="#socket" aria-hidden="true">#</a> Socket</h3><p>There is initial support for accessing the REST API (and <em>theoretically</em> the SignalR one) over a Unix socket, but that is disabled by default. Add a socket path to the <code>Server.SocketPath</code> key in your configuration and restart the server to enable the socket interface.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/silveredgold/beta-censoring/edit/main/docs/content/developers.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 35001040+silveredgold@users.noreply.github.com">Silvered Gold</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/beta-censoring/assets/app.2a3709a1.js" defer></script>
  </body>
</html>
